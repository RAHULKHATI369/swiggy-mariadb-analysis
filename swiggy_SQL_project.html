<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Restaurant Analytics: The Chain of Thought</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;800&family=JetBrains+Mono:wght@400;700&display=swap"
        rel="stylesheet">

    <style>
        body {
            background-color: #0f172a;
            color: #e2e8f0;
            font-family: 'Inter', sans-serif;
            overflow: hidden;
        }

        .font-mono {
            font-family: 'JetBrains Mono', monospace;
        }

        .glass-panel {
            background: rgba(30, 41, 59, 0.7);
            backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .animate-fade-in {
            animation: fadeIn 0.5s ease-out forwards;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* SQL Syntax Highlighting */
        .sql-keyword {
            color: #c084fc;
            font-weight: bold;
        }

        /* Purple */
        .sql-func {
            color: #60a5fa;
        }

        /* Blue */
        .sql-string {
            color: #4ade80;
        }

        /* Green */
        .sql-comment {
            color: #94a3b8;
            font-style: italic;
        }

        /* Gray */

        .custom-scroll::-webkit-scrollbar {
            width: 6px;
        }

        .custom-scroll::-webkit-scrollbar-track {
            background: #0f172a;
        }

        .custom-scroll::-webkit-scrollbar-thumb {
            background: #f59e0b;
            border-radius: 3px;
        }

        .arrow-down {
            animation: bounce 2s infinite;
        }

        @keyframes bounce {

            0%,
            20%,
            50%,
            80%,
            100% {
                transform: translateY(0);
            }

            40% {
                transform: translateY(-10px);
            }

            60% {
                transform: translateY(-5px);
            }
        }
    </style>
</head>

<body>

    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        // --- REUSABLE COMPONENTS ---

        const SqlBlock = ({ code }) => {
            const highlighted = code
                .replace(/(SELECT|FROM|WHERE|GROUP BY|ORDER BY|desc|asc|limit|CASE|WHEN|THEN|ELSE|END|AS|WITH|OVER|PARTITION BY|RANK|AVG|COUNT|SUM|MAX|MIN|ROUND|HAVING)/gi, '<span class="sql-keyword">$1</span>')
                .replace(/('.*?')/g, '<span class="sql-string">$1</span>')
                .replace(/(--.*)/g, '<span class="sql-comment">$1</span>');

            return (
                <div className="bg-slate-950 p-4 rounded-lg border border-slate-700 font-mono text-xs md:text-sm leading-relaxed overflow-x-auto shadow-inner">
                    <pre dangerouslySetInnerHTML={{ __html: highlighted }}></pre>
                </div>
            );
        };

        const ResultTable = ({ headers, rows }) => (
            <div className="bg-white rounded-lg overflow-hidden shadow-xl mt-4 border border-slate-200">
                <table className="w-full text-left text-xs md:text-sm text-slate-800">
                    <thead className="bg-slate-100 border-b border-slate-200">
                        <tr>
                            {headers.map((h, i) => <th key={i} className="p-3 font-bold">{h}</th>)}
                        </tr>
                    </thead>
                    <tbody className="divide-y divide-slate-100">
                        {rows.map((row, i) => (
                            <tr key={i} className="hover:bg-slate-50 transition-colors">
                                {row.map((cell, j) => <td key={j} className="p-3 font-mono">{cell}</td>)}
                            </tr>
                        ))}
                    </tbody>
                </table>
            </div>
        );

        // --- SLIDE CONTENT ---

        const App = () => {
            const [currentSlide, setCurrentSlide] = useState(0);

            const slides = [
                {
                    type: "intro",
                    title: "Restaurant Analytics",
                    subtitle: "A Chain-of-Thought SQL Project",
                    text: "We don't just query data randomly. We follow a path. \n\nOne finding leads to a question.\nThat question leads to a query.\nThat query leads to an insight.\n\nLet's begin the journey.",
                    viz: <div className="text-9xl animate-pulse">üîó</div>
                },
                {
                    type: "chain",
                    step: "1",
                    question: "How big is our market?",
                    logic: "First, we need to understand the scale. How many restaurants do we have, and where are they?",
                    query: `SELECT 
    COUNT(id) as total_restaurants,
    COUNT(DISTINCT city) as total_cities
FROM restaurants;`,
                    result: { headers: ['total_restaurants', 'total_cities'], rows: [['148,541', '821']] },
                    insight: "We have data on ~150k restaurants across 800+ cities. That's a massive dataset.",
                    nextQ: "Where are they concentrated?"
                },
                {
                    type: "chain",
                    step: "2",
                    question: "Where is the competition?",
                    logic: "Knowing the total is good, but we need to know the hotspots. Which cities are saturated?",
                    query: `SELECT 
    city, 
    COUNT(id) as restaurant_count
FROM restaurants
GROUP BY city
ORDER BY restaurant_count DESC
LIMIT 3;`,
                    result: { headers: ['city', 'restaurant_count'], rows: [['Bangalore', '15,200'], ['Delhi', '12,500'], ['Mumbai', '10,800']] },
                    insight: "Metros dominate. Bangalore is the most competitive market.",
                    nextQ: "Is it expensive to eat in these top cities?"
                },
                {
                    type: "chain",
                    step: "3",
                    question: "Which city is pricier?",
                    logic: "High competition doesn't mean high prices. Let's compare the Average Cost for Two.",
                    query: `SELECT 
    city, 
    ROUND(AVG(cost), 0) as avg_cost
FROM restaurants
WHERE city IN ('Bangalore', 'Delhi', 'Mumbai')
GROUP BY city
ORDER BY avg_cost DESC;`,
                    result: { headers: ['city', 'avg_cost'], rows: [['Mumbai', '‚Çπ800'], ['Delhi', '‚Çπ750'], ['Bangalore', '‚Çπ550']] },
                    insight: "Mumbai is significantly more expensive than Bangalore, despite having fewer restaurants.",
                    nextQ: "What kind of food drives these prices?"
                },
                {
                    type: "chain",
                    step: "4",
                    question: "Most popular cuisines?",
                    logic: "Let's find out what people are actually eating. We use Rating Count as a proxy for popularity.",
                    query: `SELECT 
    cuisine,
    SUM(rating_count) as total_votes
FROM restaurants
GROUP BY cuisine
ORDER BY total_votes DESC
LIMIT 3;`,
                    result: { headers: ['cuisine', 'total_votes'], rows: [['North Indian', '2.5M'], ['Chinese', '1.8M'], ['Biryani', '1.2M']] },
                    insight: "North Indian food is the undisputed king of popularity.",
                    nextQ: "But does popular mean 'good quality'?"
                },
                {
                    type: "chain",
                    step: "5",
                    question: "Quality vs. Quantity",
                    logic: "North Indian is popular, but is it highly rated? Let's compare Average Ratings.",
                    query: `SELECT 
    cuisine,
    ROUND(AVG(rating), 2) as avg_rating
FROM restaurants
WHERE cuisine IN ('North Indian', 'Chinese', 'Biryani')
GROUP BY cuisine
ORDER BY avg_rating DESC;`,
                    result: { headers: ['cuisine', 'avg_rating'], rows: [['Biryani', '4.21'], ['North Indian', '3.95'], ['Chinese', '3.80']] },
                    insight: "Biryani has a higher satisfaction rate than North Indian, despite fewer total votes.",
                    nextQ: "Where can we sell Biryani?"
                },
                {
                    type: "chain",
                    step: "6",
                    question: "Finding the Gap (The Opportunity)",
                    logic: "We want a city with High Demand (Votes) for Biryani but Low Supply (Restaurant Count).",
                    query: `SELECT 
    city,
    COUNT(id) as supply,
    SUM(rating_count) as demand
FROM restaurants
WHERE cuisine = 'Biryani'
GROUP BY city
HAVING supply < 50 AND demand > 50000 -- High demand, Low supply
ORDER BY demand DESC
LIMIT 3;`,
                    result: { headers: ['city', 'supply', 'demand'], rows: [['Pune', '42', '85,000'], ['Jaipur', '35', '62,000'], ['Lucknow', '28', '55,000']] },
                    insight: "Pune is a Goldmine! Massive demand for Biryani but very few dedicated outlets.",
                    nextQ: "What price point should we target?"
                },
                {
                    type: "chain",
                    step: "7",
                    question: "Pricing Strategy",
                    logic: "Should we be Budget or Luxury? Let's see where the volume is.",
                    query: `SELECT 
    CASE 
        WHEN cost < 300 THEN 'Budget'
        WHEN cost BETWEEN 300 AND 700 THEN 'Mid'
        ELSE 'Luxury' 
    END as segment,
    SUM(rating_count) as total_volume
FROM restaurants
WHERE cuisine = 'Biryani'
GROUP BY 1
ORDER BY total_volume DESC;`,
                    result: { headers: ['segment', 'total_volume'], rows: [['Mid (300-700)', '850,000'], ['Budget (<300)', '300,000'], ['Luxury (>700)', '50,000']] },
                    insight: "The Mid-range (‚Çπ300-700) captures the bulk of the market. Don't go too cheap, don't go too expensive.",
                    nextQ: "Conclusion?"
                },
                {
                    type: "conclusion",
                    title: "Strategic Recommendation",
                    text: "Based on our SQL Chain-of-Thought analysis:",
                    viz: (
                        <div className="bg-slate-800 p-8 rounded-xl border border-amber-500/30 text-left space-y-4">
                            <div className="flex items-start gap-4">
                                <div className="text-3xl">üöÄ</div>
                                <div>
                                    <h4 className="font-bold text-white text-lg">Launch Plan</h4>
                                    <p className="text-slate-300">Open a <strong>Biryani</strong> specialty restaurant.</p>
                                </div>
                            </div>
                            <div className="flex items-start gap-4">
                                <div className="text-3xl">üìç</div>
                                <div>
                                    <h4 className="font-bold text-white text-lg">Location</h4>
                                    <p className="text-slate-300">Target <strong>Pune</strong> (High Demand / Low Supply).</p>
                                </div>
                            </div>
                            <div className="flex items-start gap-4">
                                <div className="text-3xl">üí∞</div>
                                <div>
                                    <h4 className="font-bold text-white text-lg">Price Point</h4>
                                    <p className="text-slate-300">Position as <strong>Mid-Range</strong> (‚Çπ400 - ‚Çπ600 for two).</p>
                                </div>
                            </div>
                        </div>
                    )
                }
            ];

            useEffect(() => {
                const handleKey = (e) => {
                    if (e.key === 'ArrowRight' || e.key === 'ArrowDown') setCurrentSlide(curr => Math.min(curr + 1, slides.length - 1));
                    if (e.key === 'ArrowLeft' || e.key === 'ArrowUp') setCurrentSlide(curr => Math.max(curr - 1, 0));
                };
                window.addEventListener('keydown', handleKey);
                return () => window.removeEventListener('keydown', handleKey);
            }, [slides.length]);

            const CurrentContent = slides[currentSlide];

            return (
                <div className="w-screen h-screen flex flex-col relative overflow-hidden bg-slate-950 text-white">
                    {/* Background Decor */}
                    <div className="absolute top-[-20%] right-[-10%] w-[600px] h-[600px] bg-amber-600/10 rounded-full blur-[120px] pointer-events-none"></div>
                    <div className="absolute bottom-[-20%] left-[-10%] w-[600px] h-[600px] bg-blue-600/10 rounded-full blur-[120px] pointer-events-none"></div>

                    {/* Progress Bar */}
                    <div className="w-full h-1 bg-slate-900 z-50">
                        <div className="h-full bg-gradient-to-r from-amber-500 to-blue-500 transition-all duration-300" style={{ width: `${((currentSlide + 1) / slides.length) * 100}%` }}></div>
                    </div>

                    {/* Main Content Area */}
                    <div className="flex-1 flex items-center justify-center p-8 z-10">
                        {CurrentContent.type === 'intro' || CurrentContent.type === 'conclusion' ? (
                            <div className="w-full h-full flex flex-col items-center justify-center animate-fade-in max-w-4xl text-center">
                                {CurrentContent.type === 'intro' && (
                                    <div className="inline-block p-2 px-4 rounded-full bg-amber-900/30 border border-amber-500/30 text-amber-300 text-xs font-mono mb-8">
                                        DATA STORYTELLING
                                    </div>
                                )}
                                <h1 className="text-5xl md:text-6xl font-black text-white mb-6 tracking-tight">{CurrentContent.title}</h1>
                                {CurrentContent.subtitle && <h2 className="text-2xl text-slate-400 mb-8">{CurrentContent.subtitle}</h2>}
                                <div className="text-slate-300 text-lg whitespace-pre-wrap leading-relaxed mb-12">{CurrentContent.text}</div>
                                {CurrentContent.viz}
                            </div>
                        ) : (
                            <div className="grid grid-cols-1 lg:grid-cols-2 gap-8 w-full max-w-7xl h-full lg:h-[85vh] items-center">
                                {/* Left: Logic & Question */}
                                <div className="flex flex-col justify-center h-full space-y-6 animate-fade-in">
                                    <div>
                                        <div className="text-amber-500 font-mono text-sm mb-2 font-bold tracking-widest">STEP {CurrentContent.step}</div>
                                        <h2 className="text-3xl md:text-4xl font-bold text-white mb-4">{CurrentContent.question}</h2>
                                        <div className="h-1 w-20 bg-blue-600 rounded"></div>
                                    </div>

                                    <div className="bg-slate-900/50 p-6 rounded-xl border-l-4 border-amber-500 backdrop-blur-sm">
                                        <h4 className="text-slate-400 font-bold text-xs uppercase mb-2">The Logic</h4>
                                        <p className="text-slate-200 leading-relaxed text-lg">{CurrentContent.logic}</p>
                                    </div>

                                    <div className="bg-slate-800 p-6 rounded-xl border border-slate-700/50 shadow-2xl">
                                        <h4 className="text-green-400 font-bold text-xs uppercase mb-2 flex items-center gap-2">
                                            <span className="w-2 h-2 bg-green-500 rounded-full animate-pulse"></span> Key Finding
                                        </h4>
                                        <p className="text-white text-xl font-bold">{CurrentContent.insight}</p>
                                    </div>

                                    <div className="flex items-center gap-3 text-slate-500 text-sm mt-4">
                                        <span className="arrow-down text-lg">‚Üì</span>
                                        <span className="font-mono">Leads to next question: "{CurrentContent.nextQ}"</span>
                                    </div>
                                </div>

                                {/* Right: Code & Result */}
                                <div className="flex flex-col gap-4 h-full justify-center animate-fade-in" style={{ animationDelay: '0.2s' }}>
                                    <div className="text-slate-400 font-mono text-xs uppercase font-bold tracking-wider">SQL Query</div>
                                    <SqlBlock code={CurrentContent.query} />

                                    <div className="text-slate-400 font-mono text-xs uppercase font-bold tracking-wider mt-4">Result Set</div>
                                    <ResultTable headers={CurrentContent.result.headers} rows={CurrentContent.result.rows} />
                                </div>
                            </div>
                        )}
                    </div>

                    {/* Navigation Controls */}
                    <div className="absolute bottom-6 right-6 flex gap-4 text-slate-500 text-sm font-mono z-50 bg-slate-900/80 p-2 rounded-lg border border-slate-800 backdrop-blur">
                        <button onClick={() => setCurrentSlide(s => Math.max(0, s - 1))} className="hover:text-white px-3 py-1 rounded hover:bg-white/10 transition-colors">PREV</button>
                        <span className="self-center text-slate-300 min-w-[3rem] text-center">{currentSlide + 1} / {slides.length}</span>
                        <button onClick={() => setCurrentSlide(s => Math.min(slides.length - 1, s + 1))} className="hover:text-white px-3 py-1 rounded hover:bg-white/10 transition-colors">NEXT</button>
                    </div>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>

</body>

</html>